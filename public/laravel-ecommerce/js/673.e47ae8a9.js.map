{"version":3,"file":"js/673.e47ae8a9.js","mappings":"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","sources":["webpack://laravel-ecommerce/./src/views/auth/Login.vue?6dc0","webpack://laravel-ecommerce/./src/graphql/CustomerLoginMutation.ts","webpack://laravel-ecommerce/./src/views/auth/Login.vue?a9f8","webpack://laravel-ecommerce/./src/views/auth/Login.vue"],"sourcesContent":["import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, normalizeClass as _normalizeClass, createTextVNode as _createTextVNode, withCtx as _withCtx, withModifiers as _withModifiers, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"w-full flex justify-center mx-auto\" }\nconst _hoisted_2 = { class: \"relative py-20 sm:max-w-md w-full\" }\nconst _hoisted_3 = { class: \"relative w-full rounded-3xl px-6 py-4 bg-gray-100 shadow-md\" }\nconst _hoisted_4 = { class: \"block mt-3 text-red-700 text-center text-2xl font-semibold\" }\nconst _hoisted_5 = { class: \"mt-5\" }\nconst _hoisted_6 = { class: \"mt-5\" }\nconst _hoisted_7 = { class: \"mt-7 flex\" }\nconst _hoisted_8 = { class: \"w-full text-right\" }\nconst _hoisted_9 = { class: \"mt-7\" }\nconst _hoisted_10 = { class: \"bg-red-500 w-full py-3 rounded-xl text-white shadow-xl hover:shadow-inner focus:outline-none transition duration-500 ease-in-out transform hover:-translate-x hover:scale-105\" }\nconst _hoisted_11 = { class: \"mt-7\" }\nconst _hoisted_12 = { class: \"flex justify-center items-center\" }\nconst _hoisted_13 = { class: \"mr-2\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_avored_input = _resolveComponent(\"avored-input\")!\n  const _component_router_link = _resolveComponent(\"router-link\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createElementVNode(\"div\", _hoisted_3, [\n        _createElementVNode(\"div\", _hoisted_4, _toDisplayString(_ctx.t('login')), 1),\n        _createElementVNode(\"form\", {\n          method: \"#\",\n          action: \"#\",\n          onSubmit: _cache[2] || (_cache[2] = _withModifiers(\n//@ts-ignore\n(...args) => (_ctx.onFormSubmit && _ctx.onFormSubmit(...args)), [\"prevent\"])),\n          class: \"mt-10\"\n        }, [\n          _createElementVNode(\"div\", _hoisted_5, [\n            _createVNode(_component_avored_input, {\n              \"field-name\": \"email\",\n              \"field-type\": \"email\",\n              placeholder: _ctx.t('email'),\n              \"field-error\": _ctx._.get(_ctx.validationErrors, 'email.0'),\n              \"field-label\": _ctx.t('email'),\n              modelValue: _ctx.userAuthData.email,\n              \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((_ctx.userAuthData.email) = $event))\n            }, null, 8, [\"placeholder\", \"field-error\", \"field-label\", \"modelValue\"])\n          ]),\n          _createElementVNode(\"div\", _hoisted_6, [\n            _createVNode(_component_avored_input, {\n              \"field-name\": \"password\",\n              \"field-type\": \"password\",\n              \"field-error\": _ctx._.get(_ctx.validationErrors, 'password.0'),\n              class: _normalizeClass(_ctx.t('password')),\n              placeholder: _ctx.t('password'),\n              \"field-label\": _ctx.t('password'),\n              modelValue: _ctx.userAuthData.password,\n              \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((_ctx.userAuthData.password) = $event))\n            }, null, 8, [\"field-error\", \"class\", \"placeholder\", \"field-label\", \"modelValue\"])\n          ]),\n          _createElementVNode(\"div\", _hoisted_7, [\n            _createElementVNode(\"div\", _hoisted_8, [\n              _createVNode(_component_router_link, {\n                to:  {name: 'auth.forgot.password' },\n                class: \"underline text-sm text-gray-600 hover:text-gray-900\"\n              }, {\n                default: _withCtx(() => [\n                  _createTextVNode(_toDisplayString(_ctx.t('forgot_your_password')), 1)\n                ]),\n                _: 1\n              }, 8, [\"to\"])\n            ])\n          ]),\n          _createElementVNode(\"div\", _hoisted_9, [\n            _createElementVNode(\"button\", _hoisted_10, _toDisplayString(_ctx.t('login')), 1)\n          ]),\n          _createElementVNode(\"div\", _hoisted_11, [\n            _createElementVNode(\"div\", _hoisted_12, [\n              _createElementVNode(\"label\", _hoisted_13, _toDisplayString(_ctx.t('dont_have_account_with_us')), 1),\n              _createVNode(_component_router_link, {\n                to: { name: 'auth.register' },\n                class: \"text-red-500 transition duration-500 ease-in-out transform hover:-translate-x hover:scale-105\"\n              }, {\n                default: _withCtx(() => [\n                  _createTextVNode(_toDisplayString(_ctx.t('register')), 1)\n                ]),\n                _: 1\n              }, 8, [\"to\"])\n            ])\n          ])\n        ], 32)\n      ])\n    ])\n  ]))\n}","import gql from 'graphql-tag'\n\nconst CustomerLoginMutation = gql`\n    mutation CustomerLogin (\n            $password: String!\n            $email: String!\n        ) {\n        login (\n            email: $email\n            password: $password\n        ) {\n            token_type\n            access_token\n            expires_in\n            refresh_token\n        }\n    }\n`\nexport default CustomerLoginMutation\n","\nimport _ from 'lodash'\nimport { defineComponent, ref } from \"vue\"\nimport AvoRedInput from \"@/components/forms/AvoRedInput.vue\"\nimport CustomerLoginMutation from '@/graphql/CustomerLoginMutation'\nimport { useMutation } from \"@urql/vue\"\nimport { AUTH_TOKEN, CUSTOMER_LOGGED_IN } from \"@/constants\"\nimport { useRouter } from \"vue-router\"\nimport { useI18n } from \"vue-i18n\"\n\nexport default defineComponent({\n  components: {\n    \"avored-input\": AvoRedInput,\n  },\n  setup() {\n    const { t } = useI18n()\n    const router = useRouter()\n    const email = ref(\"\")\n    const validationErrors = ref({})\n    const password = ref(\"\")\n    const userAuthData = ref({\n      email: '',\n      password: ''\n    })\n\n    const loginMutation = useMutation(CustomerLoginMutation)\n\n    const onFormSubmit = async () => {\n      // const variables = {\n      //   email: email.value,\n      //   password: password.value,\n      // }\n\n      const accessToken = await loginMutation\n        .executeMutation(userAuthData)\n        .then((result) => {\n          if (_.get(result, 'error.graphQLErrors.0.extensions.category') === 'validation') {\n              validationErrors.value =  _.get(result, 'error.graphQLErrors.0.extensions.validation')\n          } else {\n              localStorage.setItem(AUTH_TOKEN, result.data.login.access_token);\n              localStorage.setItem(CUSTOMER_LOGGED_IN, \"true\");\n              router.push({ name: \"home\" })  \n          }\n        })\n\n      ;\n    }\n    return {\n      t,\n      onFormSubmit,\n      email,\n      password,\n      validationErrors,\n      userAuthData,\n      _\n    }\n  },\n});\n","import { render } from \"./Login.vue?vue&type=template&id=1654819f&ts=true\"\nimport script from \"./Login.vue?vue&type=script&lang=ts\"\nexport * from \"./Login.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/data/avored-frontend/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","render","_ctx","_cache","$props","$setup","$data","$options","_component_avored_input","_component_router_link","_","t","method","action","onSubmit","args","onFormSubmit","placeholder","get","validationErrors","modelValue","userAuthData","email","$event","password","to","name","default","CustomerLoginMutation","components","AvoRedInput","setup","router","loginMutation","async","executeMutation","then","result","value","localStorage","setItem","data","login","access_token","push","__exports__"],"sourceRoot":""}